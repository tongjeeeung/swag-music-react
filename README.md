# Pet-проект "Swag-Music"

Стек: React, Redux, HTML, CSS, TS, JS, Vite, Node.js, Express, MongoDB

Структура проекта:
- public/static/ — исходные файлы проекта
- src/components/ — папка с React компонентами
- src/pages/ — папка с базовыми страницами
- src/server/ - папка с JS сервером
- src/services/ - папка с слайсами проекта (Redux)
- src/utils/ - папка с утилитами

Важные файлы:
- /index.html — HTML-файл главной страницы
- src/components/entry-client.ts — точка входа приложения
- src/index.css — корневой файл стилей
- src/utils/api.ts — файл с айпи
- src/utils/types.ts — файл с типами


## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install

```

## Сборка

```
npm run server
npm run build
npm run preview

```

Перейти на http://localhost:4173/home



## Компонент `App`

Компонент `App` является основным компонентом приложения и отвечает за маршрутизацию и отображение различных страниц и компонентов. Вот его ключевые функции и особенности:

### Основные функции

1. **Маршрутизация**:
   - Использует `react-router-dom` для маршрутизации между страницами.
   - Определяет маршруты для различных страниц приложения, включая главную страницу, страницы плейлистов, блога, информации и другие.

2. **Загрузка данных**:
   - При монтировании компонента (`useEffect`) инициирует загрузку данных, таких как информация о пользователе, плейлисты, артисты, текущие треки и статьи.
   - Использует Redux для управления состоянием и выполнения асинхронных действий через thunk'и (`getAllPlaylistsThunk`, `getUserInfoThunk`, `getCurrentThunk`, `getArticlesThunk`, `getArtistsThunk`).

3. **Авторизация и аутентификация**:
   - Проверяет наличие токена доступа в cookies.
   - Если токен присутствует, запрашивает информацию о пользователе.
   - Если токен отсутствует, удаляет его из cookies.

4. **Модальные окна**:
   - Отображает модальные окна для создания и изменения плейлистов, если пользователь находится на страницах, связанных с плейлистами, и состояние фона (`backgroundLocation`) установлено.

5. **Навигация**:
   - Использует `useNavigate` для навигации и `useLocation` для управления фоновыми маршрутами при открытии модальных окон.

### Компоненты, используемые в `App`

- **`AppHeader`**: Шапка приложения, отображающая заголовок и, возможно, навигационные элементы.
- **`Footer`**: Нижний колонтитул приложения, содержащий дополнительные ссылки и информацию.
- **`Controler`**: Компонент управления, вероятно, предназначенный для управления воспроизведением музыки или другими функциями.
- **`Modal`**: Компонент модального окна, используемый для отображения контента поверх других страниц.
- **`Playlist`**: Компонент для отображения информации о плейлисте.
- **`CreatePlaylist`**: Компонент для создания нового плейлиста.
- **`CangePlaylist`**: Компонент для изменения существующего плейлиста.
- **`ProtectedRoute`**: Компонент для защиты маршрутов, доступных только аутентифицированным или неаутентифицированным пользователям.

### Маршруты

- **`/home`**: Главная страница с музыкальным контентом (`AppMusic`).
- **`/playlists`**: Страница с плейлистами (`PlaylistsPage`).
- **`/blog`**: Страница блога (`BlogPage`).
- **`/information`**: Страница информации (`InformationPage`).
- **`/blog/:id`**: Страница статьи блога (`ArticlePage`).
- **`/executor/:id`**: Страница исполнителя (`ExecutorPage`).
- **`/login`**: Страница входа (`LoginPage`), доступная только для неавторизованных пользователей.
- **`/registration`**: Страница регистрации (`RegistrationPage`), доступная только для неавторизованных пользователей.
- **`/forgot`**: Страница восстановления пароля (`ForgotPage`), доступная только для неавторизованных пользователей.
- **`/profile`**: Страница профиля пользователя (`ProfilePage`), доступная только для авторизованных пользователей.

## Компонент `AppHeader`

`AppHeader` — это компонент заголовка приложения, который отвечает за отображение пользовательского интерфейса шапки и управление темной и светлой темами.

### Основные функции

1. **Управление темой**:
   - Компонент проверяет текущую тему (`threme`) из глобального состояния и применяет соответствующий класс (`dark` или `light`) к элементу `<body>`.
   - Позволяет пользователю переключаться между темной, светлой и стандартной темами. При переключении темы обновляется состояние через `dispatch(setThreme(...))`.

2. **Выход из аккаунта**:
   - При наличии авторизованного пользователя предоставляет функцию для выхода из аккаунта, которая вызывает `logOutThunk`.

3. **Отображение пользовательского интерфейса**:
   - Использует компонент `AppHeaderUI` для отображения имени и аватара текущего пользователя, а также для предоставления кнопок для выхода и изменения темы.

### Основные функции и обработчики

- **`changeThreme`**:
  - Функция переключает тему приложения между светлой, темной и стандартной. Обновляет класс на элементе `<body>` и состояние темы в Redux.

- **`logOutHandle`**:
  - Функция для выхода из системы, вызывающая `logOutThunk` при наличии авторизованного пользователя.

### Пропсы для `AppHeaderUI`

- **`userName`**: Имя текущего пользователя (если пользователь авторизован).
- **`userAvatar`**: Аватар текущего пользователя (если пользователь авторизован).
- **`logOutHandle`**: Функция для выхода из системы (если пользователь авторизован).
- **`thremeVoid`**: Функция для переключения темы.


## Компонент `Article`

`Article` — это компонент для отображения отдельной статьи, который загружает данные статьи по её идентификатору и отображает их пользователю.

### Основные функции

1. **Загрузка статьи**:
   - Использует `useParams` для получения идентификатора статьи из параметров URL.
   - При монтировании компонента (`useEffect`) инициирует загрузку данных статьи через `dispatch(getArticleThunk(...))`.

2. **Отображение данных**:
   - Компонент проверяет состояние загрузки (`isLoading`) из Redux.
   - Пока данные загружаются, отображает компонент `Preloader`.
   - После завершения загрузки отображает компонент `ArticleHeaderUI`, передавая ему данные статьи, такие как название, заголовок, подзаголовок и изображения.

### Основные функции и обработчики

- **Загрузка данных**:
  - Использует `getArticleThunk` для получения данных статьи по её идентификатору.
  - Состояние загрузки и данные статьи хранятся в Redux.

- **Отображение состояния загрузки**:
  - Если данные еще загружаются, отображает компонент `Preloader`.

- **Отображение статьи**:
  - После загрузки данных отображает компонент `ArticleHeaderUI` с полученными данными:
    - `name`: Название статьи.
    - `titleFir`: Основной заголовок статьи.
    - `titleSec`: Подзаголовок статьи (если имеется).
    - `imgFir`: Основное изображение статьи.
    - `imgSec`: Вторичное изображение статьи (если имеется).

### Пропсы для `ArticleHeaderUI`

- **`name`**: Название статьи.
- **`titleFir`**: Основной заголовок статьи.
- **`titleSec`**: Подзаголовок статьи (если имеется).
- **`imgFir`**: Основное изображение статьи.
- **`imgSec`**: Вторичное изображение статьи (если имеется).


## Компонент `Blog`

`Blog` — это компонент для отображения списка статей блога. Он получает данные о статьях из Redux и отображает их пользователю через компонент `BlogUI`.

### Основные функции

1. **Получение статей**:
   - Использует `useSelector` для получения списка статей из глобального состояния Redux (`getArticles`).

2. **Отображение статей**:
   - Если в списке статей есть элементы (`articles.length > 0`), компонент отображает их через `BlogUI`.

### Пропсы для `BlogUI`

- **`children`**: Список статей, полученный из Redux. 

### Примечания

- Если список статей пустой, компонент не отображает ничего.
- `BlogUI` отвечает за отображение и форматирование статей блога. 


## Компонент `CangePlaylist`

`CangePlaylist` — это компонент для изменения информации о плейлисте. Он позволяет пользователю редактировать существующий плейлист, изменять его название, информацию, изображение и треки, а также удалять плейлист.

### Основные функции

1. **Редактирование плейлиста**:
   - Загружает текущее состояние плейлиста из глобального состояния Redux.
   - Позволяет пользователю изменять название плейлиста, информацию, изображение и треки.

2. **Обработка уникальных треков**:
   - Формирует список уникальных треков из всех доступных плейлистов для предотвращения дублирования треков в плейлисте.

3. **Обработка данных**:
   - При отправке формы (`handleSubmit`), создается объект плейлиста с обновленными данными и отправляется в Redux для обновления (`ubdateUserPlaylistThunk`).
   - Также обновляется список всех плейлистов и выполняется навигация назад.

4. **Удаление плейлиста**:
   - Позволяет удалить плейлист через вызов `deleteUserPlaylistThunk`, после чего происходит навигация на главную страницу.

### Основные функции и обработчики

- **`handleSubmit`**:
  - Создает объект плейлиста с обновленными данными и вызывает `ubdateUserPlaylistThunk` для сохранения изменений.
  - Обновляет список всех плейлистов через `getAllPlaylistsThunk`.
  - Навигация назад после успешного сохранения.

- **`handleDeletePlaylist`**:
  - Удаляет текущий плейлист через `deleteUserPlaylistThunk`.
  - После удаления происходит навигация на главную страницу (`/home`).

### Пропсы для `CreatePlaylistUI`

- **`name`**: Название плейлиста.
- **`setName`**: Функция для изменения названия плейлиста.
- **`image`**: Изображение плейлиста.
- **`setImage`**: Функция для изменения изображения плейлиста.
- **`info`**: Информация о плейлисте.
- **`setInfo`**: Функция для изменения информации о плейлисте.
- **`selectedTracks`**: Список выбранных треков.
- **`setSelectedTracks`**: Функция для изменения списка выбранных треков.
- **`handleSubmit`**: Функция для обработки отправки формы и сохранения изменений.
- **`tracks`**: Список всех доступных треков.
- **`handleDeletePlaylist`**: Функция для удаления плейлиста.
- **`id`**: Идентификатор плейлиста.


## Компонент `Controler`

`Controler` — это компонент управления воспроизведением аудио, который предоставляет функциональность для управления треками, регулировки громкости и применения различных настроек воспроизведения (таких как повтор и случайный выбор треков).

### Основные функции

1. **Управление воспроизведением**:
   - Инициализирует и управляет воспроизведением текущего трека с помощью элемента `HTMLAudioElement`.
   - Обрабатывает переключение треков, перемотку, изменение громкости и управление воспроизведением (плей/пауза).

2. **Отображение текущего трека**:
   - Отображает информацию о текущем треке, включая имя, исполнителя, изображение и таймер трека.

3. **Управление состоянием трека**:
   - Поддерживает функции для перехода к следующему или предыдущему треку, перемотки трека и регулировки громкости.
   - Позволяет пользователю ставить трек на повтор, случайное воспроизведение и добавлять трек в избранное.

### Основные функции и обработчики

- **`audioTime(duration: number)`**:
  - Форматирует продолжительность трека в строку вида `MM:SS`.

- **`handleSubmit`**:
  - Обрабатывает отправку формы и сохранение изменений.

- **`likeHandle`**:
  - Обрабатывает добавление или удаление трека из избранного. Если пользователь не авторизован, перенаправляет на страницу входа.

- **`prevHandle`**:
  - Переключает на предыдущий трек в текущем альбоме.

- **`nextHandle`**:
  - Переключает на следующий трек. Если включен режим случайного воспроизведения, выбирает случайный трек.

- **`progressHandle(evt: number)`**:
  - Перематывает трек в соответствии с пользовательским вводом (прогресс).

- **`volumeHandle(evt: number)`**:
  - Регулирует громкость воспроизведения.

- **`volumeMuteHandle()`**:
  - Переключает режим отключения звука (мут).

- **`repeatHandle()`**:
  - Переключает режим повторного воспроизведения трека.

- **`shuffleHandle()`**:
  - Переключает режим случайного воспроизведения треков.

- **`shuffleNextHandle()`**:
  - Переключает на случайный трек из альбома, если включен режим случайного воспроизведения.

- **`playHandle()`**:
  - Переключает состояние воспроизведения (плей/пауза).

### Пропсы для `ControlerUI`

- **`name`**: Название текущего трека.
- **`executorID`**: Идентификатор исполнителя текущего трека.
- **`executor`**: Имя исполнителя текущего трека.
- **`image`**: Изображение текущего трека.
- **`duration`**: Длительность текущего трека.
- **`open`**: Флаг, указывающий, должен ли быть отображен контроллер.
- **`trackTimer`**: Текущая позиция воспроизведения трека в формате `MM:SS`.
- **`isLike`**: Флаг, указывающий, является ли текущий трек избранным.
- **`isPlaying`**: Флаг, указывающий, воспроизводится ли трек в данный момент.
- **`isRepeat`**: Флаг, указывающий, включен ли режим повторного воспроизведения.
- **`isShuffle`**: Флаг, указывающий, включен ли режим случайного воспроизведения.
- **`progressVoid`**: Функция для обработки перемотки трека.
- **`volumeVoid`**: Функция для обработки изменения громкости.
- **`volumeButtonVoid`**: Функция для обработки отключения звука.
- **`volumeWidth`**: Уровень громкости.
- **`likeVoid`**: Функция для обработки добавления/удаления трека из избранного.
- **`nextVoid`**: Функция для переключения на следующий трек.
- **`playVoid`**: Функция для переключения состояния воспроизведения.
- **`prevVoid`**: Функция для переключения на предыдущий трек.
- **`repeatVoid`**: Функция для переключения режима повторного воспроизведения.
- **`shuffleVoid`**: Функция для переключения режима случайного воспроизведения.


## Компонент `CreatePlaylist`

`CreatePlaylist` — это компонент для создания нового плейлиста. Он позволяет пользователю задавать название плейлиста, информацию, выбирать треки и загружать изображение для плейлиста.

### Основные функции

1. **Создание нового плейлиста**:
   - Позволяет пользователю ввести название плейлиста, описание, загрузить изображение и выбрать треки для включения в плейлист.

2. **Обработка уникальных треков**:
   - Формирует список уникальных треков из всех доступных плейлистов для предотвращения дублирования треков в новом плейлисте.

3. **Отправка данных**:
   - При отправке формы (`handleSubmit`), создает объект нового плейлиста и отправляет его в Redux через `postNewUserPlaylistThunk`.

### Основные функции и обработчики

- **`handleSubmit`**:
  - Создает объект нового плейлиста с введенными данными и отправляет его в Redux с помощью `postNewUserPlaylistThunk`.
  - После успешного создания плейлиста, перенаправляет пользователя на страницу профиля (`/profile`).

### Пропсы для `CreatePlaylistUI`

- **`name`**: Название нового плейлиста.
- **`setName`**: Функция для изменения названия плейлиста.
- **`image`**: Изображение плейлиста.
- **`setImage`**: Функция для изменения изображения плейлиста.
- **`info`**: Описание плейлиста.
- **`setInfo`**: Функция для изменения описания плейлиста.
- **`selectedTracks`**: Список выбранных треков.
- **`setSelectedTracks`**: Функция для изменения списка выбранных треков.
- **`handleSubmit`**: Функция для обработки отправки формы и создания нового плейлиста.
- **`tracks`**: Список всех доступных треков.


## Компонент `Executor`

`Executor` — это компонент, отображающий информацию об исполнителе, его плейлистах и треках. Он также предоставляет возможность прослушать случайный трек исполнителя.

### Основные функции

1. **Отображение информации об исполнителе**:
   - Показывает информацию о выбранном исполнителе, его плейлистах и треках.

2. **Сбор треков**:
   - Собирает все треки из плейлистов исполнителя для последующего использования.

3. **Воспроизведение случайного трека**:
   - Позволяет воспроизвести случайный трек из треков исполнителя по нажатию кнопки.

### Основные функции и обработчики

- **`listenHandle`**:
  - Выбирает случайный трек из собранного списка треков исполнителя и запускает его воспроизведение. Для этого вызывается `postCurrentTrackThunk` с идентификатором выбранного трека и `truePlaying` для начала воспроизведения.

### Пропсы для `ExecutorUI`

- **`executor`**: Информация об исполнителе, включая имя и описание.
- **`playlists`**: Список плейлистов исполнителя.
- **`tracks`**: Список треков исполнителя (ограниченный 15 треками).
- **`executors`**: Список всех исполнителей.
- **`listenHandle`**: Функция для воспроизведения случайного трека.

### Примечания

- Если информация об исполнителе не загружена, отображается компонент `Preloader`.
- Компонент собирает все треки из плейлистов исполнителя для предоставления функции воспроизведения случайного трека.


## Компонент `Footer`

`Footer` — это компонент, отображающий нижнюю часть страницы. Он предназначен для размещения различных элементов интерфейса, таких как информация о сайте, ссылки или контактные данные.

### Основные функции

- **Отображение нижней части страницы**:
  - Предоставляет базовый макет для размещения элементов интерфейса в нижней части страницы.

### Пропсы для `FooterUI`

- **Нет пропсов**:
  - Компонент `Footer` не принимает никаких пропсов. Все необходимые элементы для отображения размещены внутри компонента `FooterUI`.

### Примечания

- Компонент `Footer` использует `FooterUI` для рендеринга содержимого, предоставляя простую и централизованную точку для управления нижним колонтитулом страницы.


## Компонент `Forgot`

`Forgot` — это компонент для восстановления пароля. Он предоставляет форму для ввода email и нового пароля, а также обработку отправки данных для сброса пароля.

### Основные функции

1. **Форма восстановления пароля**:
   - Позволяет пользователю ввести свой email и новый пароль для восстановления доступа к учетной записи.

2. **Обработка отправки формы**:
   - При отправке формы вызывается функция `changePasswordThunk`, которая инициирует процесс сброса пароля. После успешной обработки данных, пользователь перенаправляется на страницу входа (`/login`).

### Основные функции и обработчики

- **`handleSubmit`**:
  - Обрабатывает отправку формы, предотвращает стандартное действие браузера, вызывает `changePasswordThunk` с введенными email и паролем, и перенаправляет пользователя на страницу входа.

### Пропсы для `ForgotUI`

- **`email`**: Значение поля ввода email.
- **`setEmail`**: Функция для обновления значения поля ввода email.
- **`password`**: Значение поля ввода пароля.
- **`setPassword`**: Функция для обновления значения поля ввода пароля.
- **`handleSubmit`**: Функция для обработки отправки формы.

### Примечания

- Использует хук `useNavigate` для перенаправления пользователя после успешного сброса пароля.
- Хук `useDispatch` используется для отправки действия по сбросу пароля через `changePasswordThunk`.


## Компонент `Information`

`Information` — это компонент, который отображает страницу с информацией. Он предоставляет базовый интерфейс для вывода информации или данных на страницу.

### Основные функции

- **Отображение информации**:
  - Предназначен для отображения информации на странице, такой как контактные данные, информация о сайте или другие общие сведения.

### Пропсы для `InformationUI`

- **Нет пропсов**:
  - Компонент `Information` не принимает пропсы. Все необходимые элементы для отображения размещены внутри компонента `InformationUI`.

### Примечания

- Компонент `Information` использует `InformationUI` для рендеринга содержимого, предоставляя простую и централизованную точку для отображения информации.


## Компонент `Login`

`Login` — это компонент для авторизации пользователя. Он предоставляет форму для ввода email и пароля, а также обработку отправки данных для входа в систему.

### Основные функции

1. **Форма входа**:
   - Позволяет пользователю ввести свой email и пароль для авторизации в системе.

2. **Обработка отправки формы**:
   - При отправке формы вызывается функция `loginUserThunk`, которая инициирует процесс входа. После успешной авторизации пользователя перенаправляет на страницу домашнего экрана (`/home`).

### Основные функции и обработчики

- **`handleSubmit`**:
  - Обрабатывает отправку формы, предотвращает стандартное действие браузера, вызывает `loginUserThunk` с введенными email и паролем, и перенаправляет пользователя на страницу домашнего экрана.

### Пропсы для `LoginUI`

- **`email`**: Значение поля ввода email.
- **`password`**: Значение поля ввода пароля.
- **`setEmail`**: Функция для обновления значения поля ввода email.
- **`setPassword`**: Функция для обновления значения поля ввода пароля.
- **`handleSubmit`**: Функция для обработки отправки формы.

### Примечания

- Использует хук `useNavigate` для перенаправления пользователя после успешного входа.
- Хук `useDispatch` используется для отправки действия по авторизации через `loginUserThunk`.


## Компонент `Modal`

`Modal` — это компонент для отображения модальных окон. Он предоставляет базовый механизм для отображения модального контента и управления его поведением, таким как закрытие по нажатию клавиши `Escape`.

### Основные функции

1. **Отображение модального окна**:
   - Использует `ReactDOM.createPortal` для рендеринга модального окна в элементе с идентификатором `modals`, который должен быть доступен в DOM.

2. **Обработка закрытия модального окна**:
   - Позволяет закрыть модальное окно по нажатию клавиши `Escape`.

### Основные функции и обработчики

- **`useEffect`**:
  - Добавляет обработчик события `keydown` для закрытия модального окна при нажатии клавиши `Escape`.
  - Очищает обработчик события при размонтировании компонента.

- **`ReactDOM.createPortal`**:
  - Рендерит содержимое модального окна в элемент, который находится за пределами иерархии родительского компонента, обеспечивая тем самым правильное отображение модального окна поверх всего остального контента.

### Пропсы для `ModalUI`

- **`children`**: Содержимое модального окна. Компонент может содержать любой React узел.
- **`onClose`**: Функция, вызываемая при попытке закрыть модальное окно (например, при нажатии на клавишу `Escape`).

### Примечания

- Убедитесь, что в вашем HTML есть элемент с идентификатором `modals` для правильного рендеринга модального окна.
- Компонент `Modal` управляет своим поведением через пропсы и `useEffect`, что позволяет эффективно обрабатывать закрытие модального окна.


## Компонент `Playlist`

`Playlist` — это компонент для отображения деталей конкретного плейлиста. Он предоставляет функциональность для управления плейлистом, включая добавление в избранное, перемешивание треков и редактирование плейлиста.

### Основные функции

1. **Отображение плейлиста**:
   - Загружает и отображает информацию о плейлисте, включая его название, исполнитель, изображение, информацию и треки.

2. **Функциональность управления плейлистом**:
   - **Добавление в избранное**: Позволяет пользователю добавить или удалить плейлист из избранного. Доступно только для авторизованных пользователей.
   - **Перемешивание треков**: Позволяет переключать состояние перемешивания треков в плейлисте.
   - **Редактирование плейлиста**: Позволяет пользователю редактировать плейлист, если он является его владельцем.

### Основные функции и обработчики

- **`useEffect`**:
  - Загружает данные о плейлисте по его идентификатору при монтировании компонента.

- **`addPlaylistHandle`**:
  - Обрабатывает добавление или удаление плейлиста из избранного. Если пользователь не авторизован, перенаправляет на страницу входа.

- **`shuffleHandle`**:
  - Переключает состояние перемешивания треков в плейлисте.

- **`changeHandle`**:
  - Перенаправляет пользователя на страницу редактирования плейлиста, если пользователь является владельцем плейлиста.

### Пропсы для `PlaylistUI`

- **`name`**: Название плейлиста.
- **`executor`**: Исполнитель плейлиста.
- **`image`**: Изображение плейлиста.
- **`isAdd`**: Флаг, указывающий, добавлен ли плейлист в избранное.
- **`changeHandle`**: Функция для обработки редактирования плейлиста.
- **`isShuffle`**: Флаг, указывающий, активирован ли режим перемешивания треков.
- **`isOwner`**: Флаг, указывающий, является ли пользователь владельцем плейлиста.
- **`information`**: Информация о плейлисте.
- **`id`**: Идентификатор плейлиста.
- **`addPlaylistHandle`**: Функция для обработки добавления плейлиста в избранное.
- **`shuffleHandle`**: Функция для переключения состояния перемешивания треков.

### Примечания

- Использует хук `useNavigate` для перенаправления пользователей.
- Компонент проверяет авторизован ли пользователь для выполнения некоторых действий, таких как добавление в избранное и редактирование плейлиста.
- Использует хук `useSelector` для получения состояния из Redux store и хук `useDispatch` для отправки действий.


## Компонент `PlayListList`

`PlayListList` — это компонент, который отображает список плейлистов в зависимости от текущего пути навигации. Он предоставляет интерфейс для просмотра пользовательских плейлистов или всех доступных плейлистов.

### Основные функции

1. **Отображение списка плейлистов**:
   - В зависимости от текущего пути (`/home` или любой другой), отображает либо пользовательские плейлисты, либо все доступные плейлисты.

2. **Аутентификация**:
   - Компонент проверяет, авторизован ли пользователь, и передает эту информацию для управления доступом к различным функциям UI.

### Основные функции и обработчики

- **`location.pathname`**:
  - Определяет, какой заголовок и список плейлистов следует отобразить.
  - Если путь равен `/home`, отображаются плейлисты пользователя.
  - В противном случае отображаются все доступные плейлисты.

### Пропсы для `PlayListListUI`

- **`title`**: Заголовок для списка плейлистов. Может быть "Your MuSSSiC" для пользовательских плейлистов или "All MuSSSiC" для всех доступных плейлистов.
- **`children`**: Список плейлистов для отображения. Может быть пустым, если нет доступных плейлистов.
- **`locationState`**: Содержит состояние навигации для использования при отображении плейлистов.
- **`isAuth`**: Флаг, указывающий, авторизован ли пользователь. Используется для управления доступом в UI.

### Примечания

- Использует хук `useLocation` для определения текущего пути навигации.
- Использует хук `useSelector` для получения состояния из Redux store, включая список пользовательских плейлистов и всех плейлистов, а также информацию о статусе аутентификации.


## Компонент `PopularList`

`PopularList` — это компонент, который отображает список популярных треков. Он использует информацию о текущем треке для отображения основных данных и списка треков.

### Основные функции

1. **Отображение списка популярных треков**:
   - Компонент отображает список треков, которые являются популярными в системе.

2. **Отображение текущего трека**:
   - Использует информацию о текущем треке, чтобы показать основные данные, такие как название трека, исполнитель и изображение, если они доступны. В противном случае отображает данные первого трека из списка популярных треков.

### Основные функции и обработчики

- **`tracks`**:
  - Список популярных треков, получаемый из состояния Redux. Если список не пуст, он используется для отображения треков.

- **`current`**:
  - Содержит информацию о текущем треке, если таковой имеется. Эти данные используются для отображения основного трека, если они доступны.

### Пропсы для `PopularListUI`

- **`trackAutor`**: Исполнитель текущего трека. Если текущий трек не доступен, используется исполнитель первого трека из списка популярных треков.
- **`trackImage`**: Изображение текущего трека. Если текущий трек не доступен, используется изображение первого трека из списка популярных треков.
- **`trackTitle`**: Название текущего трека. Если текущий трек не доступен, используется название первого трека из списка популярных треков.

### Отображение треков

- **`Track`**:
  - Компонент отображает информацию о каждом треке, включая название, исполнителя, продолжительность, идентификатор трека и идентификатор плейлиста.

### Примечания

- Использует хук `useSelector` для получения списка популярных треков и информации о текущем треке из Redux store.
- Если список треков пуст, компонент возвращает `null`, не отображая ничего.


## Компонент `Profile`

`Profile` — это компонент, который отображает информацию о пользователе и предоставляет возможность редактирования профиля. Он также показывает список плейлистов пользователя.

### Основные функции

1. **Отображение информации о пользователе**:
   - Показывает текущее имя, электронную почту и аватар пользователя.

2. **Редактирование профиля**:
   - Позволяет пользователю редактировать имя, электронную почту и аватар. Отображает форму редактирования, когда активен режим редактирования.

3. **Отображение плейлистов пользователя**:
   - Отображает список плейлистов, добавленных пользователем.

### Основные функции и обработчики

- **`avatar`**:
  - Стейт для хранения URL аватара пользователя. Изначально заполняется значением из данных пользователя.

- **`name`**:
  - Стейт для хранения имени пользователя. Изначально заполняется значением из данных пользователя.

- **`email`**:
  - Стейт для хранения электронной почты пользователя. Изначально заполняется значением из данных пользователя.

- **`edit`**:
  - Булев стейт для управления режимом редактирования. Определяет, отображается ли форма редактирования профиля.

- **`editToggleHandle`**:
  - Обработчик для переключения режима редактирования.

- **`handleSubmit`**:
  - Обработчик для отправки формы редактирования профиля. Отправляет обновленные данные профиля на сервер.

### Хуки и эффекты

- **`useEffect`** (для получения плейлистов):
  - Получает плейлисты пользователя при изменении списка добавленных плейлистов пользователя.

- **`useEffect`** (для инициализации данных профиля):
  - Заполняет стейты `avatar`, `name` и `email` значениями из данных пользователя и сбрасывает режим редактирования.

### Пропсы для `ProfileUI`

- **`name`**: Имя пользователя.
- **`setName`**: Функция для обновления имени пользователя.
- **`email`**: Электронная почта пользователя.
- **`setEmail`**: Функция для обновления электронной почты пользователя.
- **`avatar`**: URL аватара пользователя.
- **`setAvatar`**: Функция для обновления аватара пользователя.
- **`edit`**: Определяет, находится ли пользователь в режиме редактирования.
- **`editHadnle`**: Функция для переключения режима редактирования.
- **`handleSubmit`**: Функция для обработки отправки формы редактирования профиля.
- **`locationState`**: Состояние маршрутизации, используется для сохранения текущего состояния фона.
- **`userAlbums`**: Список плейлистов пользователя.

### Примечания

- Использует хук `useDispatch` для отправки действий в Redux store.
- Использует хук `useSelector` для получения данных пользователя и плейлистов из Redux store.
- Компонент использует `SyntheticEvent` для обработки событий формы.


## Компонент `ProtectedRoute`

`ProtectedRoute` — это компонент маршрутизации, который управляет доступом к защищенным маршрутам на основе состояния авторизации пользователя. Он проверяет, должен ли пользователь быть авторизованным для доступа к определенным маршрутам, и перенаправляет их при необходимости.

### Пропсы

- **`onlyUnAuth`** (опционально): Булевое значение, указывающее, что маршрут доступен только для неавторизованных пользователей. Если значение `true`, маршрут будет доступен только для пользователей, не вошедших в систему. Если значение `false` или `undefined`, маршрут будет доступен только для авторизованных пользователей.
- **`children`**: React элемент, который будет отображаться, если пользователь имеет соответствующий доступ.

### Логика

1. **Если `onlyUnAuth` не задан или `false`**:
   - Если пользователь не авторизован (`!user`), перенаправляет на страницу регистрации (`/registration`). При этом сохраняет текущее местоположение в состоянии для последующего перенаправления после авторизации.
   - Если пользователь авторизован, отображает дочерние компоненты (`children`).

2. **Если `onlyUnAuth` установлен в `true`**:
   - Если пользователь авторизован (`user`), перенаправляет на страницу `/home` или на страницу, указанную в состоянии `from`, если оно присутствует.
   - Если пользователь не авторизован, отображает дочерние компоненты (`children`).


## Компонент `Registration`

`Registration` — это компонент, который отображает форму для регистрации нового пользователя. Пользователи могут ввести свои данные и отправить их для регистрации в системе.

### Логика

1. **Форма регистрации**: Содержит поля для ввода имени, email и пароля.
2. **Обработка отправки формы**:
   - При отправке формы (`handleSubmit`) данные из полей (имя, email и пароль) отправляются в действие `registerUserThunk` для регистрации пользователя.
   - После успешной регистрации пользователь перенаправляется на главную страницу (`/home`).

### Хуки

- `useState`: Управляет состоянием полей формы (`name`, `email`, `password`).
- `useNavigate`: Позволяет перенаправить пользователя после успешной регистрации.
- `useDispatch`: Отправляет действие регистрации пользователя в Redux.


## Компонент Slider

Компонент `Slider` представляет собой слайдер для отображения популярных плейлистов с возможностью прослушивания треков.

### Описание

Компонент `Slider` отображает слайдер с плейлистами, которые включены в список популярных плейлистов. Пользователи могут прослушивать треки, выбрав один из плейлистов.

### Основные функции

- **Отображение слайдера**: Компонент отображает слайдер с плейлистами, полученными из состояния приложения.
- **Навигация по слайдам**: Компонент автоматически перемещает слайды влево и вправо с помощью функции `sliderHandle`.
- **Прослушивание треков**: При выборе плейлиста, слайдер передает текущий трек в плеер и начинает воспроизведение.

### Пропсы

- **`sliderVoid`**: Функция, которая управляет перемещением слайдов.
- **`items`**: Массив объектов типа `TPlaylist`, представляющий плейлисты для отображения.
- **`listenHandle`**: Функция для выбора трека и обновления текущего плейлиста.

### Состояние и эффекты

- **`position`**: Текущая позиция слайда. Начальное значение - 100, которое изменяется при прокрутке.
- **`flag`**: Флаг для контроля направления прокрутки слайдов.
- **`items`**: Список плейлистов, формируемый из популярных плейлистов и исполнителей.
- **`listenHandle`**: Функция для обработки выбора трека и обновления состояния плеера.
- **`sliderHandle`**: Функция для изменения позиции слайдов.


## Компонент Track

Компонент `Track` отображает информацию о треке и предоставляет возможность взаимодействия с ним, такой как прослушивание и добавление в избранное.

### Описание

Компонент `Track` отображает информацию о треке, включая имя, исполнителя и продолжительность. Пользователи могут прослушивать трек или добавить его в список избранного.

### Пропсы

- **`name`**: Название трека.
- **`executor`**: Исполнитель трека.
- **`duration`**: Продолжительность трека.
- **`_id`**: Уникальный идентификатор трека.
- **`executorID`**: Уникальный идентификатор исполнителя.
- **`playlistID`**: Уникальный идентификатор плейлиста, к которому принадлежит трек.

### Состояние и логика

- **`like`**: Определяет, добавлен ли трек в избранное пользователем.
- **`playing`**: Определяет, воспроизводится ли трек в данный момент.

### Обработчики событий

- **`likeHandle`**: Функция для добавления или удаления трека из списка избранного. Если пользователь не авторизован, перенаправляет на страницу входа.
- **`playHandle`**: Функция для воспроизведения трека. Если трек уже воспроизводится, функция переключает состояние воспроизведения (пауза/воспроизведение). Если трек не воспроизводится, функция устанавливает его как текущий трек и начинает воспроизведение.


## В планах

1. Доделать README.md
2. Пофиксить известные баги
3. Доработать страницу блога
4. Добавить визуальную часть в плейлистах
